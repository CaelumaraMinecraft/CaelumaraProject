plugins {
  id("java-library")
  alias(libs.plugins.kotlin)
  alias(libs.plugins.shadow)
}

dependencies {
  // implements auspice folia api
  api(project(":folia-api"))

  // https://github.com/PaperMC/Folia/blob/master/README.md#the-new-rules
  // https://github.com/PaperMC/Folia
  compileOnly("dev.folia:folia-api:1.21.4-R0.1-SNAPSHOT")
}

int targetJavaVersion = 21
java {
  JavaVersion javaVersion = JavaVersion.toVersion(targetJavaVersion)
  sourceCompatibility = javaVersion
  targetCompatibility = javaVersion
  if (JavaVersion.current() < javaVersion) {
    toolchain.languageVersion = JavaLanguageVersion.of(targetJavaVersion)
  }
}
